import { DOCUMENT } from '@angular/common';
import { Inject, Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { NgxKeyboardEventsModule } from './ngx-keyboard-events.module';
import * as i0 from "@angular/core";
export var NgxKey;
(function (NgxKey) {
    // letters and numbers
    NgxKey[NgxKey["A"] = 65] = "A";
    NgxKey[NgxKey["B"] = 66] = "B";
    NgxKey[NgxKey["C"] = 67] = "C";
    NgxKey[NgxKey["D"] = 68] = "D";
    NgxKey[NgxKey["E"] = 69] = "E";
    NgxKey[NgxKey["F"] = 70] = "F";
    NgxKey[NgxKey["G"] = 71] = "G";
    NgxKey[NgxKey["H"] = 72] = "H";
    NgxKey[NgxKey["I"] = 73] = "I";
    NgxKey[NgxKey["J"] = 74] = "J";
    NgxKey[NgxKey["K"] = 75] = "K";
    NgxKey[NgxKey["L"] = 76] = "L";
    NgxKey[NgxKey["M"] = 77] = "M";
    NgxKey[NgxKey["N"] = 78] = "N";
    NgxKey[NgxKey["O"] = 79] = "O";
    NgxKey[NgxKey["P"] = 80] = "P";
    NgxKey[NgxKey["Q"] = 81] = "Q";
    NgxKey[NgxKey["R"] = 82] = "R";
    NgxKey[NgxKey["S"] = 83] = "S";
    NgxKey[NgxKey["T"] = 84] = "T";
    NgxKey[NgxKey["U"] = 85] = "U";
    NgxKey[NgxKey["V"] = 86] = "V";
    NgxKey[NgxKey["W"] = 87] = "W";
    NgxKey[NgxKey["X"] = 88] = "X";
    NgxKey[NgxKey["Y"] = 89] = "Y";
    NgxKey[NgxKey["Z"] = 90] = "Z";
    NgxKey[NgxKey["Digit0"] = 48] = "Digit0";
    NgxKey[NgxKey["Digit1"] = 49] = "Digit1";
    NgxKey[NgxKey["Digit2"] = 50] = "Digit2";
    NgxKey[NgxKey["Digit3"] = 51] = "Digit3";
    NgxKey[NgxKey["Digit4"] = 52] = "Digit4";
    NgxKey[NgxKey["Digit5"] = 53] = "Digit5";
    NgxKey[NgxKey["Digit6"] = 54] = "Digit6";
    NgxKey[NgxKey["Digit7"] = 55] = "Digit7";
    NgxKey[NgxKey["Digit8"] = 56] = "Digit8";
    NgxKey[NgxKey["Digit9"] = 57] = "Digit9";
    NgxKey[NgxKey["Space"] = 32] = "Space";
    // punctuation
    NgxKey[NgxKey["Backslash"] = 220] = "Backslash";
    NgxKey[NgxKey["BracketLeft"] = 219] = "BracketLeft";
    NgxKey[NgxKey["BracketRight"] = 221] = "BracketRight";
    NgxKey[NgxKey["Comma"] = 188] = "Comma";
    NgxKey[NgxKey["Grave"] = 192] = "Grave";
    NgxKey[NgxKey["Period"] = 190] = "Period";
    NgxKey[NgxKey["Quote"] = 222] = "Quote";
    NgxKey[NgxKey["Semicolon"] = 186] = "Semicolon";
    NgxKey[NgxKey["Slash"] = 191] = "Slash";
    // modifiers
    NgxKey[NgxKey["Ctrl"] = 17] = "Ctrl";
    NgxKey[NgxKey["Shift"] = 16] = "Shift";
    NgxKey[NgxKey["Alt"] = 18] = "Alt";
    NgxKey[NgxKey["MetaLeft"] = 91] = "MetaLeft";
    NgxKey[NgxKey["WinLeft"] = 91] = "WinLeft";
    NgxKey[NgxKey["MetaRight"] = 92] = "MetaRight";
    NgxKey[NgxKey["WinRight"] = 92] = "WinRight";
    // F keys
    NgxKey[NgxKey["F1"] = 112] = "F1";
    NgxKey[NgxKey["F2"] = 113] = "F2";
    NgxKey[NgxKey["F3"] = 114] = "F3";
    NgxKey[NgxKey["F4"] = 115] = "F4";
    NgxKey[NgxKey["F5"] = 116] = "F5";
    NgxKey[NgxKey["F6"] = 117] = "F6";
    NgxKey[NgxKey["F7"] = 118] = "F7";
    NgxKey[NgxKey["F8"] = 119] = "F8";
    NgxKey[NgxKey["F9"] = 120] = "F9";
    NgxKey[NgxKey["F10"] = 121] = "F10";
    NgxKey[NgxKey["F11"] = 122] = "F11";
    NgxKey[NgxKey["F12"] = 123] = "F12";
    // random commands
    NgxKey[NgxKey["Backspace"] = 8] = "Backspace";
    NgxKey[NgxKey["Delete"] = 46] = "Delete";
    NgxKey[NgxKey["End"] = 35] = "End";
    NgxKey[NgxKey["Escape"] = 27] = "Escape";
    NgxKey[NgxKey["Home"] = 36] = "Home";
    NgxKey[NgxKey["Insert"] = 45] = "Insert";
    NgxKey[NgxKey["PageUp"] = 33] = "PageUp";
    NgxKey[NgxKey["PageDown"] = 34] = "PageDown";
    NgxKey[NgxKey["Pause"] = 19] = "Pause";
    NgxKey[NgxKey["PrintScreen"] = 44] = "PrintScreen";
    NgxKey[NgxKey["Return"] = 13] = "Return";
    // arrow keys
    NgxKey[NgxKey["LeftArrow"] = 37] = "LeftArrow";
    NgxKey[NgxKey["UpArrow"] = 38] = "UpArrow";
    NgxKey[NgxKey["RightArrow"] = 39] = "RightArrow";
    NgxKey[NgxKey["DownArrow"] = 40] = "DownArrow";
    // locks
    NgxKey[NgxKey["CapsLock"] = 9] = "CapsLock";
    NgxKey[NgxKey["NumLock"] = 144] = "NumLock";
    NgxKey[NgxKey["ScrollLock"] = 145] = "ScrollLock";
    // numpad
    NgxKey[NgxKey["NumPad0"] = 96] = "NumPad0";
    NgxKey[NgxKey["NumPad1"] = 97] = "NumPad1";
    NgxKey[NgxKey["NumPad2"] = 98] = "NumPad2";
    NgxKey[NgxKey["NumPad3"] = 99] = "NumPad3";
    NgxKey[NgxKey["NumPad4"] = 100] = "NumPad4";
    NgxKey[NgxKey["NumPad5"] = 101] = "NumPad5";
    NgxKey[NgxKey["NumPad6"] = 102] = "NumPad6";
    NgxKey[NgxKey["NumPad7"] = 103] = "NumPad7";
    NgxKey[NgxKey["NumPad8"] = 104] = "NumPad8";
    NgxKey[NgxKey["NumPad9"] = 105] = "NumPad9";
    NgxKey[NgxKey["NumPadAdd"] = 117] = "NumPadAdd";
    NgxKey[NgxKey["NumPadDecimal"] = 110] = "NumPadDecimal";
    NgxKey[NgxKey["NumPadDivide"] = 111] = "NumPadDivide";
    NgxKey[NgxKey["NumPadEnter"] = 113] = "NumPadEnter";
    NgxKey[NgxKey["NumPadMultiply"] = 106] = "NumPadMultiply";
    NgxKey[NgxKey["NumPadSubtract"] = 109] = "NumPadSubtract";
})(NgxKey || (NgxKey = {}));
export var NgxKeyLocation;
(function (NgxKeyLocation) {
    NgxKeyLocation[NgxKeyLocation["Standard"] = 0] = "Standard";
    NgxKeyLocation[NgxKeyLocation["Left"] = 1] = "Left";
    NgxKeyLocation[NgxKeyLocation["Right"] = 2] = "Right";
    NgxKeyLocation[NgxKeyLocation["NumPad"] = 3] = "NumPad";
})(NgxKeyLocation || (NgxKeyLocation = {}));
export var NgxKeyModifier;
(function (NgxKeyModifier) {
    NgxKeyModifier[NgxKeyModifier["AltOption"] = 0] = "AltOption";
    NgxKeyModifier[NgxKeyModifier["CtrlCmd"] = 1] = "CtrlCmd";
    NgxKeyModifier[NgxKeyModifier["Shift"] = 2] = "Shift";
})(NgxKeyModifier || (NgxKeyModifier = {}));
export class NgxKeyboardEvent {
}
export class NgxKeyboardEventsService {
    constructor(document) {
        this.document = document;
        this.onKeyDown$ = new Subject();
        this.onKeyUp$ = new Subject();
        if (!document.defaultView) {
            throw new Error("NgxKeyboardEvents requires a document with a truthy `defaultView` property.");
        }
        document.defaultView.addEventListener('keydown', (event) => {
            this.onKeyDown$.next(this.resolveKeyboardEvent(event));
        });
        document.defaultView.addEventListener('keyup', (event) => {
            this.onKeyUp$.next(this.resolveKeyboardEvent(event));
        });
    }
    resolveKeyboardEvent(keyEvent) {
        const modifiers = [];
        if (keyEvent.altKey) {
            modifiers.push(NgxKeyModifier.AltOption);
        }
        if (keyEvent.ctrlKey) {
            modifiers.push(NgxKeyModifier.CtrlCmd);
        }
        if (keyEvent.shiftKey) {
            modifiers.push(NgxKeyModifier.Shift);
        }
        return {
            code: keyEvent.keyCode,
            location: keyEvent.location,
            modifiers,
            name: keyEvent.code
        };
    }
}
NgxKeyboardEventsService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.5", ngImport: i0, type: NgxKeyboardEventsService, deps: [{ token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Injectable });
NgxKeyboardEventsService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.2.5", ngImport: i0, type: NgxKeyboardEventsService, providedIn: NgxKeyboardEventsModule });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.5", ngImport: i0, type: NgxKeyboardEventsService, decorators: [{
            type: Injectable,
            args: [{ providedIn: NgxKeyboardEventsModule }]
        }], ctorParameters: function () { return [{ type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWtleWJvYXJkLWV2ZW50cy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWtleWJvYXJkLWV2ZW50cy9zcmMvbGliL25neC1rZXlib2FyZC1ldmVudHMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7QUFFdkUsTUFBTSxDQUFOLElBQVksTUFtSFg7QUFuSEQsV0FBWSxNQUFNO0lBQ2hCLHNCQUFzQjtJQUN0Qiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLDhCQUFNLENBQUE7SUFDTiw4QkFBTSxDQUFBO0lBQ04sOEJBQU0sQ0FBQTtJQUNOLHdDQUFXLENBQUE7SUFDWCx3Q0FBVyxDQUFBO0lBQ1gsd0NBQVcsQ0FBQTtJQUNYLHdDQUFXLENB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b250ZW50IjpbImltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTmd4S2V5Ym9hcmRFdmVudHNNb2R1bGUgfSBmcm9tICcuL25neC1rZXlib2FyZC1ldmVudHMubW9kdWxlJztcclxuXHJcbmV4cG9ydCBlbnVtIE5neEtleSB7XHJcbiAgLy8gbGV0dGVycyBhbmQgbnVtYmVyc1xyXG4gIEEgPSA2NSxcclxuICBCID0gNjYsXHJcbiAgQyA9IDY3LFxyXG4gIEQgPSA2OCxcclxuICBFID0gNjksXHJcbiAgRiA9IDcwLFxyXG4gIEcgPSA3MSxcclxuICBIID0gNzIsXHJcbiAgSSA9IDczLFxyXG4gIEogPSA3NCxcclxuICBLID0gNzUsXHJcbiAgTCA9IDc2LFxyXG4gIE0gPSA3NyxcclxuICBOID0gNzgsXHJcbiAgTyA9IDc5LFxyXG4gIFAgPSA4MCxcclxuICBRID0gODEsXHJcbiAgUiA9IDgyLFxyXG4gIFMgPSA4MyxcclxuICBUID0gODQsXHJcbiAgVSA9IDg1LFxyXG4gIFYgPSA4NixcclxuICBXID0gODcsXHJcbiAgWCA9IDg4LFxyXG4gIFkgPSA4OSxcclxuICBaID0gOTAsXHJcbiAgRGlnaXQwID0gNDgsXHJcbiAgRGlnaXQxID0gNDksXHJcbiAgRGlnaXQyID0gNTAsXHJcbiAgRGlnaXQzID0gNTEsXHJcbiAgRGlnaXQ0ID0gNTIsXHJcbiAgRGlnaXQ1ID0gNTMsXHJcbiAgRGlnaXQ2ID0gNTQsXHJcbiAgRGlnaXQ3ID0gNTUsXHJcbiAgRGlnaXQ4ID0gNTYsXHJcbiAgRGlnaXQ5ID0gNTcsXHJcbiAgU3BhY2UgPSAzMixcclxuXHJcbiAgLy8gcHVuY3R1YXRpb25cclxuICBCYWNrc2xhc2ggPSAyMjAsXHJcbiAgQnJhY2tldExlZnQgPSAyMTksXHJcbiAgQnJhY2tldFJpZ2h0ID0gMjIxLFxyXG4gIENvbW1hID0gMTg4LFxyXG4gIEdyYXZlID0gMTkyLFxyXG4gIFBlcmlvZCA9IDE5MCxcclxuICBRdW90ZSA9IDIyMixcclxuICBTZW1pY29sb24gPSAxODYsXHJcbiAgU2xhc2ggPSAxOTEsXHJcblxyXG4gIC8vIG1vZGlmaWVyc1xyXG4gIEN0cmwgPSAxNyxcclxuICBTaGlmdCA9IDE2LFxyXG4gIEFsdCA9IDE4LFxyXG4gIE1ldGFMZWZ0ID0gOTEsXHJcbiAgV2luTGVmdCA9IDkxLFxyXG4gIE1ldGFSaWdodCA9IDkyLFxyXG4gIFdpblJpZ2h0ID0gOTIsXHJcblxyXG4gIC8vIEYga2V5c1xyXG4gIEYxID0gMTEyLFxyXG4gIEYyID0gMTEzLFxyXG4gIEYzID0gMTE0LFxyXG4gIEY0ID0gMTE1LFxyXG4gIEY1ID0gMTE2LFxyXG4gIEY2ID0gMTE3LFxyXG4gIEY3ID0gMTE4LFxyXG4gIEY4ID0gMTE5LFxyXG4gIEY5ID0gMTIwLFxyXG4gIEYxMCA9IDEyMSxcclxuICBGMTEgPSAxMjIsXHJcbiAgRjEyID0gMTIzLFxyXG5cclxuICAvLyByYW5kb20gY29tbWFuZHNcclxuICBCYWNrc3BhY2UgPSA4LFxyXG4gIERlbGV0ZSA9IDQ2LFxyXG4gIEVuZCA9IDM1LFxyXG4gIEVzY2FwZSA9IDI3LFxyXG4gIEhvbWUgPSAzNixcclxuICBJbnNlcnQgPSA0NSxcclxuICBQYWdlVXAgPSAzMyxcclxuICBQYWdlRG93biA9IDM0LFxyXG4gIFBhdXNlID0gMTksXHJcbiAgUHJpbnRTY3JlZW4gPSA0NCxcclxuICBSZXR1cm4gPSAxMyxcclxuXHJcbiAgLy8gYXJyb3cga2V5c1xyXG4gIExlZnRBcnJvdyA9IDM3LFxyXG4gIFVwQXJyb3cgPSAzOCxcclxuICBSaWdodEFycm93ID0gMzksXHJcbiAgRG93bkFycm93ID0gNDAsXHJcblxyXG4gIC8vIGxvY2tzXHJcbiAgQ2Fwc0xvY2sgPSA5LFxyXG4gIE51bUxvY2sgPSAxNDQsXHJcbiAgU2Nyb2xsTG9jayA9IDE0NSxcclxuXHJcbiAgLy8gbnVtcGFkXHJcbiAgTnVtUGFkMCA9IDk2LFxyXG4gIE51bVBhZDEgPSA5NyxcclxuICBOdW1QYWQyID0gOTgsXHJcbiAgTnVtUGFkMyA9IDk5LFxyXG4gIE51bVBhZDQgPSAxMDAsXHJcbiAgTnVtUGFkNSA9IDEwMSxcclxuICBOdW1QYWQ2ID0gMTAyLFxyXG4gIE51bVBhZDcgPSAxMDMsXHJcbiAgTnVtUGFkOCA9IDEwNCxcclxuICBOdW1QYWQ5ID0gMTA1LFxyXG4gIE51bVBhZEFkZCA9IDExNyxcclxuICBOdW1QYWREZWNpbWFsID0gMTEwLFxyXG4gIE51bVBhZERpdmlkZSA9IDExMSxcclxuICBOdW1QYWRFbnRlciA9IDExMyxcclxuICBOdW1QYWRNdWx0aXBseSA9IDEwNixcclxuICBOdW1QYWRTdWJ0cmFjdCA9IDEwOVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOZ3hLZXlMb2NhdGlvbiB7XHJcbiAgU3RhbmRhcmQgPSAwLFxyXG4gIExlZnQgPSAxLFxyXG4gIFJpZ2h0ID0gMiwgXHJcbiAgTnVtUGFkID0gM1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBOZ3hLZXlNb2RpZmllciB7XHJcbiAgQWx0T3B0aW9uLFxyXG4gIEN0cmxDbWQsXHJcbiAgU2hpZnRcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5neEtleWJvYXJkRXZlbnQge1xyXG4gIGNvZGU6IE5neEtleTtcclxuICBtb2RpZmllcnM6IE5neEtleU1vZGlmaWVyW107XHJcbiAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46IE5neEtleWJvYXJkRXZlbnRzTW9kdWxlIH0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hLZXlib2FyZEV2ZW50c1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBvbktleURvd24kID0gbmV3IFN1YmplY3Q8Tmd4S2V5Ym9hcmRFdmVudD4oKTtcclxuICBwdWJsaWMgb25LZXlVcCQgPSBuZXcgU3ViamVjdDxOZ3hLZXlib2FyZEV2ZW50PigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50KSB7XHJcbiAgICAgICAgaWYgKCFkb2N1bWVudC5kZWZhdWx0Vmlldykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmd4S2V5Ym9hcmRFdmVudHMgcmVxdWlyZXMgYSBkb2N1bWVudCB3aXRoIGEgdHJ1dGh5IGBkZWZhdWx0Vmlld2AgcHJvcGVydHkuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZGVmYXVsdFZpZXcuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5vbktleURvd24kLm5leHQodGhpcy5yZXNvbHZlS2V5Ym9hcmRFdmVudChldmVudCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5kZWZhdWx0Vmlldy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uS2V5VXAkLm5leHQodGhpcy5yZXNvbHZlS2V5Ym9hcmRFdmVudChldmVudCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc29sdmVLZXlib2FyZEV2ZW50KGtleUV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzOiBOZ3hLZXlNb2RpZmllcltdID0gW107XHJcblxyXG4gICAgICAgIGlmIChrZXlFdmVudC5hbHRLZXkpIHsgbW9kaWZpZXJzLnB1c2goTmd4S2V5TW9kaWZpZXIuQWx0T3B0aW9uKTsgfVxyXG4gICAgICAgIGlmIChrZXlFdmVudC5jdHJsS2V5KSB7IG1vZGlmaWVycy5wdXNoKE5neEtleU1vZGlmaWVyLkN0cmxDbWQpOyB9XHJcbiAgICAgICAgaWYgKGtleUV2ZW50LnNoaWZ0S2V5KSB7IG1vZGlmaWVycy5wdXNoKE5neEtleU1vZGlmaWVyLlNoaWZ0KTsgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb2RlOiA8Tmd4S2V5PmtleUV2ZW50LmtleUNvZGUsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiA8Tmd4S2V5TG9jYXRpb24+a2V5RXZlbnQubG9jYXRpb24sXHJcbiAgICAgICAgICAgIG1vZGlmaWVycyxcclxuICAgICAgICAgICAgbmFtZToga2V5RXZlbnQuY29kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIl19